<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Secure Checkout | STRIDE</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:#0f0f0f;
  color:#fff;
}
.navbar{background:#121212;padding:16px 20px}
.logo{font-size:24px;font-weight:700;letter-spacing:3px}
.logo span{color:#ff5722}

.container{max-width:460px;margin:30px auto;padding:0 15px}
.card{
  background:#1c1c1c;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.8)
}
.price{color:#4caf50;font-weight:700;margin:8px 0}
.meta{font-size:13px;color:#aaa;margin-bottom:14px}

.qr-box{
  border:1px dashed #333;
  padding:16px;
  border-radius:12px;
  text-align:center
}
.qr-box img{max-width:260px;width:100%}

.upi-buttons{display:flex;gap:10px;margin:14px 0}
.upi-buttons a{
  flex:1;
  padding:10px;
  background:#2a2a2a;
  border-radius:8px;
  text-align:center;
  font-size:13px;
  text-decoration:none;
  color:#fff
}
.upi-buttons a:hover{background:#333}

input,textarea{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid #333;
  background:#111;
  color:#fff
}

.preview{
  margin-top:10px;
  text-align:center;
}
.preview img{
  max-width:100%;
  border-radius:10px;
  border:1px solid #333;
}

button{
  width:100%;
  margin-top:16px;
  padding:14px;
  background:linear-gradient(135deg,#ff5722,#ff784e);
  border:none;
  border-radius:12px;
  color:#fff;
  font-size:16px;
  font-weight:600;
  cursor:pointer
}

button:disabled{
  opacity:.6;
  cursor:not-allowed;
}

.spinner{
  display:none;
  text-align:center;
  margin-top:12px;
  font-size:14px;
  color:#aaa;
}

.info,.disclaimer{
  background:#1a1a1a;
  border-left:4px solid #4caf50;
  padding:12px;
  margin-top:16px;
  font-size:12.5px;
  border-radius:10px;
  color:#ccc
}
.disclaimer{border-color:#ff9800}

.footer{text-align:center;font-size:12px;color:#666;margin:20px 0}
.support{text-align:center;font-size:13px;color:#aaa;margin-top:15px}
.support a{color:#ff5722;text-decoration:none}
</style>
</head>

<body>

<div class="navbar">
  <div class="logo">STR<span>IDE</span></div>
</div>

<div class="container">

<div class="card">
  <h2 id="title"></h2>

  <div class="price" id="totalPrice"></div>

  <div class="meta">
    Size: <b id="size"></b> |
    Quantity: <b id="qty"></b>
  </div>

  <div class="qr-box">
    <a id="upiLink"><img id="upiQR"></a>
    <p style="font-size:12px;color:#888">Tap or scan with any UPI app</p>
  </div>

  <div class="upi-buttons">
    <a id="upiAny">Any UPI</a>
    <a id="upiGpay">GPay</a>
    <a id="upiPhonePe">PhonePe</a>
  </div>

  <div class="info">
    Complete payment and upload screenshot below.
  </div>

  <form id="orderForm">
    <input name="name" placeholder="Full Name" required>
    <input name="email" type="email" placeholder="Email Address" required>
    <input name="phone" placeholder="Mobile Number" required>
    <textarea name="address" rows="3" placeholder="Complete Address" required></textarea>

    <input type="file" name="screenshot" id="screenshot" accept="image/*" capture="environment" required>

    <div class="preview" id="preview"></div>

    <button id="payBtn" type="submit">I Have Paid</button>
    <div class="spinner" id="spinner">Submitting payment… please wait</div>
  </form>
</div>

<div class="disclaimer">
  • Manual verification  
  • Screenshot required  
  • Order ships after confirmation
</div>

<div class="support">
  Need help? <a href="mailto:naveen.maan2006@gmail.com">naveen.maan2006@gmail.com</a>
</div>

</div>

<div class="footer">© 2025 STRIDE</div>

<script>
/* ===== ELEMENTS ===== */
const title = document.getElementById("title");
const totalPriceEl = document.getElementById("totalPrice");
const qtyEl = document.getElementById("qty");
const sizeEl = document.getElementById("size");

const upiQR = document.getElementById("upiQR");
const upiLink = document.getElementById("upiLink");
const upiAny = document.getElementById("upiAny");
const upiGpay = document.getElementById("upiGpay");
const upiPhonePe = document.getElementById("upiPhonePe");

const orderForm = document.getElementById("orderForm");
const screenshotInput = document.getElementById("screenshot");
const preview = document.getElementById("preview");
const spinner = document.getElementById("spinner");
const payBtn = document.getElementById("payBtn");

/* ===== URL PARAMS ===== */
const p = new URLSearchParams(location.search);
const product = p.get("name") || "Product";
const price = Number(p.get("price") || 0);
const qty = Number(p.get("qty") || 1);
const size = p.get("size") || "-";

const total = price * qty;

/* ===== DISPLAY ===== */
title.innerText = product;
totalPriceEl.innerText = `Total: ₹${total}`;
qtyEl.innerText = qty;
sizeEl.innerText = size;

/* ===== UPI ===== */
const UPI = "naveenmaan@ptyes";
const PAYEE = "STRIDE Store";
const upi = `upi://pay?pa=${UPI}&pn=${encodeURIComponent(PAYEE)}&am=${total}&cu=INR`;

upiQR.src = "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(upi);
upiLink.href = upi;
upiAny.href = upi;
upiGpay.href = `tez://upi/pay?pa=${UPI}&pn=${encodeURIComponent(PAYEE)}&am=${total}&cu=INR`;
upiPhonePe.href = `phonepe://pay?pa=${UPI}&pn=${encodeURIComponent(PAYEE)}&am=${total}&cu=INR`;

/* ===== SCREENSHOT PREVIEW ===== */
screenshotInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    preview.innerHTML = `<img src="${reader.result}">`;
  };
  reader.readAsDataURL(file);
});

/* ===== SUBMIT ===== */
orderForm.addEventListener("submit", e => {
  e.preventDefault();

  payBtn.disabled = true;
  spinner.style.display = "block";

  const fd = new FormData(orderForm);
  fd.append("product", product);
  fd.append("amount", total);
  fd.append("quantity", qty);
  fd.append("size", size);

  fetch("YOUR_GOOGLE_SCRIPT_URL", {
    method: "POST",
    body: fd
  });

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();
  pdf.text("STRIDE - Invoice", 20, 20);
  pdf.text(`Product: ${product}`, 20, 35);
  pdf.text(`Quantity: ${qty}`, 20, 45);
  pdf.text(`Total Paid: ₹${total}`, 20, 55);
  pdf.text("Status: Under Verification", 20, 65);
  pdf.save(`STRIDE-Invoice-${Date.now()}.pdf`);

  setTimeout(() => location.href="thank-you.html", 1200);
});
</script>

</body>
</html>
